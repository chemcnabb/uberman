/*! Mitsubishi 04-06-2021 */

!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d=d||{};d.Boot=function(a){},d.Boot.prototype={preload:function(){},create:function(){this.game.physics.startSystem(Phaser.Physics.ARCADE),this.game.scale.fullScreenScaleMode=Phaser.ScaleManager.EXACT_FIT,this.game.scale.scaleMode=Phaser.ScaleManager.EXACT_FIT,this.game.scale.refresh(),this.game.stage.backgroundColor="#000",this.game.world.setBounds(0,0,4267,8192),this.game.state.start("Preloader")},update:function(){},render:function(){}},b.exports=d.Boot},{}],2:[function(a,b,c){var d=d||{},e=a("./prefabs/Hero"),f=a("./prefabs/Pedestrian"),g=a("./prefabs/DayCycle"),h=a("./prefabs/Car"),i=a("./prefabs/Hud"),j=a("./prefabs/City");d.Game=function(a){},d.Game.prototype={preload:function(){this.cars_sprites_array=["car","car2"],this.numcars=10,this.numpredestrians=10,this.game.dayLength=3e5,this.game.development=!0},randomChoice:function(a){var b=Math.floor(Math.random()*a.length);return a[b]},addGradientBackground:function(){var a=(this.game.add.bitmapData(this.game.world.width,this.game.world.height),this.game.add.bitmapData(this.game.world.width,this.game.world.height)),b=a.context.createLinearGradient(0,0,0,this.game.world.height);return b.addColorStop(0,"black"),b.addColorStop(1,"#85b5e1"),a.context.fillStyle=b,a.context.fillRect(0,0,this.game.world.width,this.game.world.height),b=a.context.createLinearGradient(0,580,0,this.game.world.height),b.addColorStop(0,"black"),b.addColorStop(1,"#85b5e1"),a.context.fillStyle=b,a.context.fillRect(0,this.game.world.height,this.game.world.width,20),this.game.add.sprite(0,0,a)},addBackgroundSprites:function(){this.sunSprite=this.game.add.sprite(this.game.world.width-this.game.world.width/2,this.game.world.height/2,"sun"),this.moonSprite=this.game.add.sprite(this.game.world.width-this.game.world.width/2,this.game.world.height,"moon"),this.orbit=this.game.add.sprite(this.game.world.centerX-2133.5,1835,"orbit"),this.game.back=this.game.add.sprite(this.game.world.centerX-2133.5,this.game.world.height-2100,"city_background"),this.game.fore=this.game.add.sprite(this.game.world.centerX-2133.5,this.game.world.height-2133,"city_foreground"),this.city=new j(this.game,0,0)},animateDayNight:function(a){var b=[{sprite:a,from:2042407,to:11722184},{sprite:this.game.fade,from:2042407,to:11722184},{sprite:this.game.back,from:2042407,to:11722184},{sprite:this.game.fore,from:3096635,to:9882811}],c=new g(this.game,this.game.dayLength);c.initShading(b),c.initSun(this.sunSprite),c.initMoon(this.moonSprite)},addGround:function(){platforms=this.game.add.group(),platforms.enableBody=!0;var a=platforms.create(0,this.game.world.height-209,"ground");a.scale.setTo(2,2),this.game.physics.enable(a),a.body.immovable=!0},addVehicles:function(){this.cars=this.game.add.group();for(var a=0;a<this.numcars;a++){var b=this.randomChoice(this.cars_sprites_array),c=this.randomChoice(this.cars_sprites_array),d=[{LEFT:{x:this.game.world.width+270,y:this.game.world.height-120,car:b}},{RIGHT:{x:this.game.world.x-300,y:this.game.world.height-180,car:c}}],e=this.randomChoice(d);for(var f in e)if(e.hasOwnProperty(f)){var g=new h(this.game,e[f].x,e[f].y,e[f].car,f);this.cars.add(g)}}this.cars.children=this.cars.children.sort(function(a,b){return b.direction>a.direction?1:a.direction>b.direction?-1:0});for(var i in this.cars.children)this.cars.hasOwnProperty(i)&&this.game.add.existing(i)},create:function(){console.log("GAME"),this.game.player=new e(this.game,this.game.world.centerX,this.game.world.height-260,this.game.world.height/2);var a=this.addGradientBackground();this.addGround(),this.addBackgroundSprites(),this.animateDayNight(a);for(var b=this.game.add.group(),c=0;c<this.numpredestrians;c++){var d=new f(this.game,this.game.world.height-260,"pedestrian");d.tint=16777215*Math.random(),this.game.add.existing(d),b.add(d)}this.game.add.existing(this.game.player),this.addVehicles(),this.game.hud=new i(this.game),this.game.add.existing(this.game.hud),cursors=this.game.input.keyboard.createCursorKeys()},update:function(){this.game.physics.arcade.collide(this.game.player,platforms),this.city.update()},render:function(){}},b.exports=d.Game},{"./prefabs/Car":7,"./prefabs/City":8,"./prefabs/DayCycle":9,"./prefabs/Hero":10,"./prefabs/Hud":11,"./prefabs/Pedestrian":12}],3:[function(a,b,c){var d=d||{};d.MainMenu=function(a){},d.MainMenu.prototype={preload:function(){},gofull:function(){this.game.scale.startFullScreen(!1)},create:function(){console.log("MAINMENU");var a=["Uberman!"];a.push("Start"),a.push("Continue"),a.push("Full Screen");var b=this.game.add.bitmapText(this.game.width/2,this.game.height/2-200,"font",a[0],48);b.anchor.set(.5,.5);var c=this.game.add.bitmapText(this.game.width/2,this.game.height/2-100,"font",a[1],38);c.anchor.set(.5,.5);this.game.add.tween(c.scale).to({x:1.1,y:1.1},350,Phaser.Easing.Linear.InOut,!0,-1,-1,!0).loop(!0);c.inputEnabled=!0;var d=this.game.add.bitmapText(this.game.width/2,this.game.height/2,"font",a[3],38);d.anchor.set(.5,.5),d.inputEnabled=!0,d.events.onInputUp.add(this.gofull,this);var e=this;c.events.onInputUp.add(function(){e.game.add.tween(c.scale).to({x:.8,y:.8},350,Phaser.Easing.Circular.In,!0);var a=e.game.add.tween(c).to({y:-100},350,Phaser.Easing.Circular.In,!0);a.onComplete.add(function(){e.game.state.start("Game")})}),c.events.onInputOver.add(function(){console.log("Hover")})},update:function(){},render:function(){}},b.exports=d.MainMenu},{}],4:[function(a,b,c){var d=d||{};d.Preloader=function(a){},d.Preloader.prototype={preload:function(){this.game.load.bitmapFont("digits","font/digits.png","font/digits.xml"),this.game.load.bitmapFont("font","font/font.png","font/font.xml"),this.game.load.bitmapFont("smallfont","font/small_font.png","font/small_font.xml"),this.game.load.image("door","images/door.gif",70,80),this.game.load.image("orbit","images/orbit.png",4267,894),this.game.load.image("ground","images/ground.gif",4267,10),this.game.load.image("city_foreground","images/city_foreground.gif",4267,2133),this.game.load.image("city_background","images/city_background.gif",4267,2133),this.game.load.image("city_fade","images/city_fade_background.gif",4267,2133),this.game.load.image("floor_1","images/buildings/building1_floor.gif",428,25),this.game.load.image("ground_1","images/buildings/building1_ground.gif",428,98),this.game.load.image("top_1","images/buildings/building1_top.gif",428,34),this.game.load.image("floor_2","images/buildings/building2_floor.gif",273,52),this.game.load.image("ground_2","images/buildings/building2_ground.gif",273,41),this.game.load.image("top_2","images/buildings/building2_top.gif",273,78),this.game.load.image("floor_3","images/buildings/building3_floor.gif",301,136),this.game.load.image("ground_3","images/buildings/building3_ground.gif",301,50),this.game.load.image("top_3","images/buildings/building3_top.gif",301,111),this.game.load.image("floor_4","images/buildings/building4_floor.gif",501,52),this.game.load.image("ground_4","images/buildings/building4_ground.gif",501,85),this.game.load.image("top_4","images/buildings/building4_top.gif",501,166),this.game.load.image("bank","images/buildings/bank.gif",288,279),this.game.load.image("library","images/buildings/Library.gif",596,231),this.game.load.image("bakery","images/buildings/bakery.gif"),this.game.load.image("cafe","images/buildings/cafe.gif"),this.game.load.image("bookstore","images/buildings/bookstore.gif"),this.game.load.image("cape_streak","images/cape_streak.png"),this.game.load.image("sun","images/sun.png"),this.game.load.image("moon","images/moon.png"),this.game.load.spritesheet("hero","images/sprites/uber_sprite.png",65,111,28),this.game.load.spritesheet("pedestrian","images/pedestrians.gif",55,110,67),this.game.load.image("car","images/car.gif",300,95),this.game.load.image("car2","images/car2.gif",270,81),this.game.load.image("uber_disk","images/UBER_DISK.png",138,138),this.game.load.image("alter_disk","images/ALTER_DISK.png",138,138)},create:function(){console.log("PRELOADER"),this.game.state.start("Game")},update:function(){},render:function(){}},b.exports=d.Preloader},{}],5:[function(a,b,c){Boot=a("./Boot"),Preloader=a("./Preloader"),MainMenu=a("./MainMenu"),Game=a("./Game");var d={width:window.innerWidth,height:window.innerHeight};!function(a){var b=new Phaser.Game(a.width,a.height,Phaser.AUTO,"");b.state.add("Boot",Boot),b.state.add("Preloader",Preloader),b.state.add("MainMenu",MainMenu),b.state.add("Game",Game),b.state.start("Boot")}(d)},{"./Boot":1,"./Game":2,"./MainMenu":3,"./Preloader":4}],6:[function(a,b,c){BRAIN=function(a){this.game=a,this.thoughts={needs:[{maslow:[{need:"WATER",weight:2.4,value:this.getRandomRange(0,100),baseWeight:2.4,emotion:"I'm THIRSTY",goal:677,acts:["cafe","RETURN"]},{need:"FOOD",weight:2.1,value:this.getRandomRange(0,100),baseWeight:2.1,emotion:"I'm HUNGRY",goal:776,acts:["bakery","RETURN"]}],totalWeight:4.5},{maslow:[{need:"SECURITY",weight:1.09,value:this.getRandomRange(0,100),baseWeight:1.09,emotion:"I'm SCARED",goal:1700,acts:["library","RETURN"]},{need:"MONEY",weight:1.08,value:this.getRandomRange(0,100),baseWeight:1.08,emotion:"I'm BROKE",goal:2300,acts:["BANK","RETURN"]},{need:"WARMTH",weight:1.07,value:this.getRandomRange(0,100),baseWeight:1.07,emotion:"I'm COLD",goal:250,acts:["library","RETURN"]}],totalWeight:4.4},{maslow:[{need:"FRIENDSHIP",weight:1.06,value:this.getRandomRange(0,100),baseWeight:1.06,emotion:"No one LIKES ME",goal:90,acts:["bank","RETURN"]},{need:"INTIMACY",weight:1.05,value:this.getRandomRange(0,100),baseWeight:1.05,emotion:"I'm LONELY",goal:1200,acts:["library","RETURN"]},{need:"FAMILY",weight:1.04,value:this.getRandomRange(0,100),baseWeight:1.04,emotion:"I have no SUPPORT",goal:900,acts:["bank","RETURN"]}],totalWeight:2.5},{maslow:[{need:"CONFIDENCE",weight:1.03,value:this.getRandomRange(0,100),baseWeight:1.03,emotion:"I'm WEAK",goal:200,acts:["library","RETURN"]}],totalWeight:1.03},{maslow:[{need:"ART",weight:1.02,value:this.getRandomRange(0,100),baseWeight:1.02,emotion:"I'm un-CREATIVE",goal:1500,acts:["bookstore","RETURN"]},{need:"EDUCATION",weight:1.01,value:this.getRandomRange(0,100),baseWeight:1.01,emotion:"I'm not SMART",goal:2e3,acts:["LIBRARY","RETURN"]}],totalWeight:1.03}]}},BRAIN.prototype=Object.create(Phaser.Sprite.prototype),BRAIN.prototype.constructor=BRAIN,BRAIN.prototype.getWeight=function(a,b,c){return(b*(c+1)-b*c)/(a*(c+1)-a*c)-(b*c-b*(c-1))/(a*c-a*(c-1))/(a*(c+1)-a*(c-1))},BRAIN.prototype.life=function(){for(var a=0;a<this.thoughts.needs.length;a++)for(var b=this.thoughts.needs[a],c=0;c<b.maslow.length;c++)b.maslow[c].value+=.01,b.maslow[c].weight=this.getWeight(b.maslow[c].baseWeight,b.maslow[c].value,a)},BRAIN.prototype.sortThoughts=function(){for(var a=0;a<this.thoughts.needs.length;a++){for(var b=0,c=this.thoughts.needs[a],d=0;d<c.maslow.length;d++)b+=c.maslow[d].weight;c.totalWeight=b,c.maslow.sort(function(a,b){return b.weight-a.weight}),this.thoughts.needs.sort(function(a,b){return b.totalWeight-a.totalWeight})}},BRAIN.prototype.getRandomRange=function(a,b){return this.game.rnd.integerInRange(a,b)},BRAIN.prototype.setGoal=function(){return this.sortThoughts(),this.game.doors[this.thoughts.needs[0].maslow[0].acts[0].toLowerCase()].centerX},BRAIN.prototype.preload=function(){},BRAIN.prototype.update=function(){},b.exports=BRAIN},{}],7:[function(a,b,c){Car=function(a,b,c,d,e){Phaser.Sprite.call(this,a,b,c,d,0),this.direction=e,this.game.physics.enable(this,Phaser.Physics.ARCADE),this.car_tween=this.game.add.tween(this),this.driveby=this.game.add.audio("driveby"),this.start(),this.loaded=!1},Car.prototype=Object.create(Phaser.Sprite.prototype),Car.prototype.constructor=Car,Car.prototype.start=function(){var a;"LEFT"==this.direction?(a=this.game.world.x-this.width,this.scale.x=-1):(a=this.game.world.width+this.width,this.scale.x=1),this.car_tween.to({x:a},this.game.rnd.integerInRange(5e3,7e3)).loop(!0),this.car_tween.delay(this.game.rnd.integerInRange(100,1e4)),this.car_tween.start(),this.loaded=!0},Car.prototype.update=function(){this.loaded},b.exports=Car},{}],8:[function(a,b,c){CITY=function(a,b,c){Phaser.Sprite.call(this,a,b,c,"",0),this.game=a,this.buildings=this.game.add.group(),this.game.doors={},this.game.fade={},this.building_data=[{building:1,ground:37,floor:25,top:34,earth:270,max_height:40},{building:2,ground:0,floor:52,top:78,earth:250,max_height:45},{building:3,ground:0,floor:136,top:111,earth:260,max_height:20},{building:4,ground:0,floor:52,top:166,earth:295,max_height:20}],this.addOrderedBuildings(),this.addBank(),this.addLibrary(),this.addBakery(),this.addCafe(),this.addBookstore(),this.addBuildingsToGame()},CITY.prototype=Object.create(Phaser.Sprite.prototype),CITY.prototype.constructor=CITY,CITY.prototype.shuffleGroupChildren=function(a){for(var b=a.length-1;b>0;b--){var c=Math.floor(Math.random()*(b+1)),d=a[b];a[b]=a[c],a[c]=d}return a},CITY.prototype.addBuildingsToGame=function(){var a,b=0,c=200,d=this.building_data;this.buildings.children=this.shuffleGroupChildren(this.buildings.children);for(var e=0;e<this.buildings.children.length;e++){var f=this.buildings.children[e],g=f instanceof Phaser.Group;if(g===!1)f.exists=!0,f.x=c,this.game.doors[f.key]=this.game.add.sprite(f.centerX,f.y+f.height-40,"door"),this.game.doors[f.key].anchor.setTo(.5,.5),a=f.width,b+=1;else for(var h=f.game.world.height-270,i=0,j=0;j<f.children.length;j++){var k,l=f.children[j],m=l.key.split("_"),n=m[0],o=m[1];l.exists=!0,l.x=c;for(var p=0;p<d.length;p++){var q=d[p];if(q.building===parseInt(o)){k=q;break}}switch(n){case"ground":h=f.game.world.height-(k.earth+k.ground);break;case"floor":h=f.game.world.height-(k.earth+k.ground+k.floor*i);break;case"top":h=f.game.world.height-(k.earth+k.ground+k.floor*(i-1))-k.top}l.y=h,a=l.width,b+=1,i+=1}c=c+a+f.game.rnd.integerInRange(0,15)}},CITY.prototype.addLibrary=function(){this.buildings.create(0,this.game.world.height-440,"library",0,!1)},CITY.prototype.addBakery=function(){this.buildings.create(0,this.game.world.height-495,"bakery",0,!1)},CITY.prototype.addCafe=function(){this.buildings.create(0,this.game.world.height-495,"cafe",0,!1)},CITY.prototype.addBookstore=function(){this.buildings.create(0,this.game.world.height-495,"bookstore",0,!1)},CITY.prototype.addBank=function(){this.buildings.create(0,this.game.world.height-488,"bank",0,!1)},CITY.prototype.addRandomBuildings=function(){for(var a=0;a<this.game.rnd.integerInRange(10,100);a++){var b=this.building_data[this.game.rnd.integerInRange(0,this.building_data.length-1)];this.createBuilding(["ground_"+b.building,b.ground],["floor_"+b.building,b.floor],["top_"+b.building,b.top],b.earth,b.max_height)}},CITY.prototype.addOrderedBuildings=function(){for(var a=0;a<this.building_data.length;a++){var b=this.building_data[a],c=this.createBuilding(["ground_"+b.building,b.ground],["floor_"+b.building,b.floor],["top_"+b.building,b.top],b.max_height);this.buildings.add(c)}},CITY.prototype.createBuilding=function(a,b,c,d){var e=this.game.rnd.integerInRange(10,d),f=this.game.add.group();f.create(0,0,a[0],0,!1);for(var g=0;e>g;g++)f.create(0,0,b[0],0,!1);return f.create(0,0,c[0],0,!1),f},CITY.prototype.animateDamage=function(){},CITY.prototype.update=function(){this.game.back.x-=.001*this.game.player.body.velocity.x,this.game.fade.x-=5e-4*this.game.player.body.velocity.x,this.game.back.y-=.001*this.game.player.body.velocity.y,this.game.fade.y-=5e-4*this.game.player.body.velocity.y},b.exports=CITY},{}],9:[function(a,b,c){DayCycle=function(a,b){this.game=a,this.dayLength=b,this.shading=!1,this.sunSprite=!1,this.moonSprite=!1},DayCycle.prototype=Object.create(Phaser.Sprite.prototype),DayCycle.prototype.constructor=DayCycle,DayCycle.prototype.initSun=function(a){this.sunSprite=a,this.sunset(a)},DayCycle.prototype.initMoon=function(a){this.moonSprite=a,this.moonrise(a)},DayCycle.prototype.initShading=function(a){this.shading=a},DayCycle.prototype.sunrise=function(a){if(a.position.x=this.game.width-this.game.width/4,this.sunTween=this.game.add.tween(a).to({y:-250},this.dayLength,null,!0),this.sunTween.onComplete.add(this.sunset,this),this.shading){var b=this;this.shading.forEach(function(a){b.tweenTint(a.sprite,a.from,a.to,b.dayLength)})}},DayCycle.prototype.sunset=function(a){if(a.position.x=50,this.sunTween=this.game.add.tween(a).to({y:this.game.world.height},this.dayLength,null,!0),this.sunTween.onComplete.add(this.sunrise,this),this.shading){var b=this;this.shading.forEach(function(a){b.tweenTint(a.sprite,a.to,a.from,b.dayLength)})}},DayCycle.prototype.moonrise=function(a){a.position.x=this.game.width-this.game.width/4,this.moonTween=this.game.add.tween(a).to({y:-350},this.dayLength,null,!0),this.moonTween.onComplete.add(this.moonset,this)},DayCycle.prototype.moonset=function(a){a.position.x=50,this.moonTween=this.game.add.tween(a).to({y:this.game.world.height},this.dayLength,null,!0),this.moonTween.onComplete.add(this.moonrise,this)},DayCycle.prototype.tweenTint=function(a,b,c,d){var e={step:0};this.game.add.tween(e).to({step:100},d,Phaser.Easing.Default,!1).onUpdateCallback(function(){a.tint=Phaser.Color.interpolateColor(b,c,100,e.step,1)}).start()},b.exports=DayCycle},{}],10:[function(a,b,c){Hero=function(a,b,c,d){Phaser.Sprite.call(this,a,b,c,"hero",d),this.originHeight=this.game.world.height,this.isZooming=!1,this.frame=0,this.currentState="uber",this.isClicked=!1,this.sprite_message="",this.pointerHover=!1,this.inputEnabled=!0,this.events.onInputDown.add(this.onSpriteClick,this),this.events.onInputOver.add(this.onSpriteHover,this),this.events.onInputOut.add(this.onSpriteBlur,this),this.zoom_in_on=[],this.followedObject=this.body,this.game.physics.arcade.enable(this),this.directions=["LEFT","UP_LEFT","UP","UP_RIGHT","RIGHT","DOWN_RIGHT","DOWN","DOWN_LEFT"],this.alter_walk=this.animations.add("alter_up",[5],6,!1),this.alter_walk=this.animations.add("alter_fall",[5,6,7,8,9,10],6,!1),this.alter_walk=this.animations.add("alter_walk",[5,6,7,8,9,10],6,!1),this.alter_walk=this.animations.add("alter_stand",[5],6,!1),this.alter_walk=this.animations.add("uber_stand",[0],6,!1),this.alter_walk=this.animations.add("uber_walk",[17,18,19,20,21,22],6,!1),this.alter_walk=this.animations.add("fly_get_ready",[23],1,!0),this.alter_walk=this.animations.add("fly_side",[3,4],6,!1),this.alter_walk=this.animations.add("fly_side_up",[11,12],6,!0),this.alter_walk=this.animations.add("fly_side_down",[13,14],6,!0),this.alter_walk=this.animations.add("fly_hover",[1,2],6,!0),this.alter_walk=this.animations.add("fly_up",[15,16],6,!0),this.alter_walk=this.animations.add("fly_down",[15,16],6,!0),this.alter_walk=this.animations.add("fly_up_diagonal",[3,4],6,!0),this.alter_walk=this.animations.add("fly_down_diagonal",[3,4],6,!0),this.body.gravity.y=300,this.body.collideWorldBounds=!0,this.body.fixedRotation=!0,this.anchor.setTo(.5,.5),this.game.camera.follow(this,Phaser.Camera.FOLLOW_LOCKON,.1,.1)},Hero.prototype=Object.create(Phaser.Sprite.prototype),Hero.prototype.constructor=Hero,Hero.prototype.spriteMessage=function(a,b){if(!this.game.input.activePointer.isDown){this.sprite_message=this.game.add.bitmapText(a.x-2*a.body.width,a.y-a.body.height/2,"smallfont",b,18);this.game.add.tween(this.sprite_message).to({y:a.y-a.body.height/2-10},200,"Linear",!0,-1,-1,!0).loop(!0)}},Hero.prototype.onSpriteHover=function(a,b){this.pointerHover=!0;var c;c="uber"===this.currentState?"[click] Change into Secret Identity!":"[click] Change into Uberman!",this.body.touching.down&&this.spriteMessage(this,c)},Hero.prototype.onSpriteBlur=function(a,b){this.sprite_message&&this.sprite_message.destroy(),this.pointerHover=!1},Hero.prototype.onDoorClick=function(a){console.log("DOOR CLICKED"),this.zoom_in_on=[a.x,a.y],this.followedObject=a},Hero.prototype.onDoorHover=function(){var a;a="uber"===this.currentState?"[click] Change before entering!":"[click] Enter Daily Planet!",this.spriteMessage(this.game.door,a)},Hero.prototype.onDoorBlur=function(){},Hero.prototype.switch_char=function(a){a.body.touching.down&&(console.log("ON GROUND"),"uber"===a.currentState?(console.log("GOING CLARK"),a.currentState="alter",a.angle=0,a.animations.play("alter_stand")):(console.log("GOING UBER"),a.currentState="uber",a.animations.play("uber_stand")))},Hero.prototype.onSpriteClick=function(a,b){this.sprite_message&&this.sprite_message.destroy(),this.checkOverlap(a,this.game.doors)?"uber"!==this.currentState&&this.checkOverlap(a,this.game.doors)?this.game.door&&this.onDoorClick(this.game.door):(console.log("SWITCHING"),this.switch_char(a)):this.switch_char(a)},Hero.prototype.checkOverlap=function(a,b){for(var c=a.getBounds(),d=0;d<Object.keys(b).length;d++){var e=b[Object.keys(b)[d]].getBounds();if(Phaser.Rectangle.intersects(c,e))return this.game.door=b[Object.keys(b)[d]],!0}return this.game.door=null,!1},Hero.prototype.onSpriteRelease=function(a,b){this.isClicked=!1},Hero.prototype.getCardinal=function(a,b){return b?(a=Math.round((a+Math.PI)/(2*Math.PI)*8)%8,this.directions[a]):(a=Math.round((a+Math.PI)/(2*Math.PI)*4)%4,this.directions[2*a])},Hero.prototype.alter_movement=function(a){a&&(this.body.velocity.y=0),this.angle=0,this.body.allowRotation=!1;var b=this.game.input.activePointer;a&&(b.worldX>this.x&&(this.scale.x=1,this.animations.play("alter_walk")),b.worldX<this.x&&(this.scale.x=-1,this.animations.play("alter_walk")),this.game.physics.arcade.moveToXY(this,b.worldX,this.y,225))},Hero.prototype.uber_movement=function(a){var b=this.game.physics.arcade.moveToPointer(this,60,this.game.input.activePointer,500),c=this.getCardinal(b,!0);switch(this.scale.y=1,c){case"UP":this.angle=0,a?this.animations.play("uber_stand"):this.animations.play("fly_up");break;case"DOWN":this.angle=0,this.scale.y=-1,a?(this.scale.y=1,this.animations.play("uber_stand")):this.y>this.game.world.height-1200?"fly_down"==this.animations.currentAnim.name?(this.animations.play("fly_get_ready"),this.events.onAnimationComplete.add(function(){this.scale.y=1,this.animations.play("fly_hover")},this)):(this.scale.y=1,this.animations.play("fly_hover")):this.animations.play("fly_down");break;case"UP_LEFT":this.scale.x=-1,a?this.animations.play("uber_stand"):(this.angle=-45,this.animations.play("fly_side_up"));break;case"UP_RIGHT":this.scale.x=1,a?this.animations.play("take_off"):(this.angle=45,this.animations.play("fly_side_up"));break;case"RIGHT":this.scale.x=1,a?(this.angle=0,this.animations.play("uber_walk")):(this.angle=90,this.animations.play("fly_side"));break;case"DOWN_RIGHT":this.scale.x=1,a?(this.angle=0,this.animations.play("uber_walk")):(this.angle=135,this.animations.play("fly_side_down"));break;case"DOWN_LEFT":this.scale.x=-1,a?(this.angle=0,this.animations.play("uber_walk")):(this.angle=-135,this.animations.play("fly_side_down"));break;case"LEFT":this.scale.x=-1,a?(this.angle=0,this.animations.play("uber_walk")):(this.angle=-90,this.animations.play("fly_side"))}},Hero.prototype.isMoving=function(){return Phaser.Point.equals(this.body.velocity,new Phaser.Point(0,0))},Hero.prototype.update=function(){var a,b=this.body.touching.down;this.isZooming||(this.game.input.activePointer.isDown&&(this.pointerHover?this.pointerHover=!1:"uber"==this.currentState?this.uber_movement(b):this.alter_movement(b)),this.game.input.activePointer.isDown||(this.angle=0,this.body.velocity.set(0),a=null,"uber"==this.currentState?(this.scale.y=1,this.animations.play("fly_hover"),b&&this.animations.play("uber_stand")):this.animations.stop()))},Hero.prototype.render=function(){this.game.debug.text(direction||"--",2,14,"#0f0")},b.exports=Hero},{}],11:[function(a,b,c){HUD=function(a,b,c){this.player=a.player,this.bar=a.add.bitmapData(128,20),Phaser.Sprite.call(this,a,0,0,this.bar),this.fixedToCamera=!0,this.cameraOffset.setTo(162,100),this.damage=0;var d=this.game.add.bitmapText(this.game.width/2-55,50,"digits","",62);d.fixedToCamera=!0,d.align="center";var e={};e.time=0,this.timeTween=this.game.add.tween(e).to({time:this.game.dayLength},this.game.dayLength),this.timeTween.onUpdateCallback(function(){d.text=parseInt(e.time/1e3/60)%12+":"+parseInt(e.time/1e3%60).toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})}),this.timeTween.start(),this.uber_disk=this.game.add.sprite(0,0,"uber_disk"),this.uber_disk.anchor.setTo(.5,.5),this.uber_disk.fixedToCamera=!0,this.uber_disk.cameraOffset.setTo(89,89),this.alter_disk=this.game.add.sprite(0,0,"alter_disk"),this.alter_disk.anchor.setTo(.5,.5),this.alter_disk.fixedToCamera=!0,this.alter_disk.cameraOffset.setTo(89,89),this.barProgress=128},HUD.prototype=Object.create(Phaser.Sprite.prototype),HUD.prototype.constructor=HUD,HUD.prototype.preload=function(){this.game.time.advancedTiming=!0},HUD.prototype.switchState=function(){"uber"==this.player.currentState&&(this.game.add.tween(this.alter_disk.scale).to({x:0,y:0},30,Phaser.Easing.Bounce.InOut,!0),this.game.add.tween(this.uber_disk.scale).to({x:1,y:1},30,Phaser.Easing.Bounce.InOut,!0),this.uber_disk.bringToTop()),"alter"==this.player.currentState&&(this.game.add.tween(this.uber_disk.scale).to({x:0,y:0},30,Phaser.Easing.Bounce.InOut,!0),this.game.add.tween(this.alter_disk.scale).to({x:1,y:1},30,Phaser.Easing.Bounce.InOut,!0),this.alter_disk.bringToTop())},HUD.prototype.animateDamage=function(){this.damage>0&&(this.game.add.tween(this).to({barProgress:this.barProgress-this.damage},200,"Linear",!0),this.damage=0)},HUD.prototype.update=function(){this.switchState(),this.bar.context.clearRect(0,0,this.bar.width,this.bar.height),this.barProgress<32?this.bar.context.fillStyle="#f00":this.barProgress<64?this.bar.context.fillStyle="#ff0":this.bar.context.fillStyle="#0f0",this.bar.context.fillRect(0,0,this.barProgress,20),this.bar.dirty=!0,this.animateDamage()},b.exports=HUD},{}],12:[function(a,b,c){var d=a("./Brain");Pedestrian=function(a,b,c){Phaser.Sprite.call(this,a,a.rnd.integerInRange(-200,a.world.width+200),b,c,0),this.anchor.setTo(.5,.5),this.frame=0,this.frames=[],this.pedestrian_array=["oldman-wait","businessman-wait","delivery-wait","boy-wait","slick-wait","hapgood-wait","foreign-wait"],this.visible=!0,this.ai=new d(a),this.direction=this.setDirection(),this.sprite_message="",this.animations.add("oldman-wait",[14],6,!0),this.animations.add("oldman-walk",[0,1,2,3,4,5],6,!0),this.animations.add("businessman-walk",[6,7,8,9],6,!0),this.animations.add("businessman-wait",[10,11,12,13],6,!0),this.animations.add("delivery-wait",[21],6,!0),this.animations.add("delivery-walk",[15,16,17,18,19,20],6,!0),this.animations.add("boy-walk",[22,23,24,25,26,27],6,!0),this.animations.add("boy-wait",[28],6,!0),this.animations.add("slick-walk",[29,30,31,32,33,34,35,36,37],9,!0),this.animations.add("slick-wait",[38],6,!0),this.animations.add("hapgood-walk",[39,40,41,42,43,44,45,46,47,48,49,50],12,!0),this.animations.add("hapgood-wait",[51,52,53,54],6,!0),this.animations.add("foreign-walk",[55,56,57,58,59,60],6,!0),this.animations.add("foreign-wait",[61],6,!0),this.anim=this.randomChoice(this.pedestrian_array),this.check_animation(),this.movement()},Pedestrian.prototype=Object.create(Phaser.Sprite.prototype),Pedestrian.prototype.constructor=Pedestrian,Pedestrian.prototype.spriteMessage=function(){if(this.sprite_message&&this.sprite_message.destroy(),this.visible){var a="";a=this.isMoving?this.ai.thoughts.needs[0].maslow[0].emotion:"Thinking...",this.sprite_message=this.game.add.bitmapText(this.centerX,this.y-this.height/2,"smallfont",a,18),this.sprite_message.anchor.setTo(.5,.5)}},Pedestrian.prototype.removePedestrian=function(a,b){b.visible=!1,b.ai.thoughts.needs[0].maslow[0].value=0;b.game.time.events.add(4*Phaser.Timer.SECOND,a,b)},Pedestrian.prototype.putBack=function(){this.visible=!0,this.goal=this.ai.setGoal()},Pedestrian.prototype.onSpriteHover=function(a,b){},Pedestrian.prototype.setDirection=function(){return this.goal<this.x?(this.scale.x=-1,"LEFT"):(this.scale.x=1,"RIGHT")},Pedestrian.prototype.randomChoice=function(a){var b=Math.floor(Math.random()*a.length);return a[b]},Pedestrian.prototype.getNormalizedSpeed=function(a){return Math.round(Phaser.Math.distance(this.x,this.y,this.goal,this.y)/a*1e6)},Pedestrian.prototype.getSpeed=function(a,b){return this.getNormalizedSpeed(a)+this.game.rnd.integerInRange(100,b)},Pedestrian.prototype.brain=function(){this.isWalking()===!0&&(this.speed=this.getNormalizedSpeed(5e4)),this.isWaiting()===!0&&(this.speed=0)},Pedestrian.prototype.isWaiting=function(){return-1!==this.anim.indexOf("-wait")},Pedestrian.prototype.isWalking=function(){return-1!==this.anim.indexOf("-walk")},Pedestrian.prototype.check_animation=function(){this.move_tween=this.game.add.tween(this);var a=this.game.rnd.integerInRange(1e3,6e3);this.brain(),this.isWalking()===!0?(this.move_tween.to({x:this.goal},this.speed).delay(a),this.move_tween.start(),this.move_tween.onStart.add(function(){this.isMoving=!0,this.movement()},this),this.move_tween.onComplete.add(function(){this.anim=this.anim.replace("-walk","-wait"),this.isMoving=!1,this.movement()},this)):(this.move_tween.stop(),this.isMoving=!1)},Pedestrian.prototype.doWait=function(){this.anim=this.anim.replace("-walk","-wait"),this.check_animation(),this.removePedestrian(this.putBack,this)},Pedestrian.prototype.movement=function(){this.direction=this.setDirection(),this.animations.play(this.anim),this.loaded=!0},Pedestrian.prototype.goalAchieved=function(){return this.x===this.goal},Pedestrian.prototype.update=function(){this.spriteMessage(),this.ai.life(),this.goalAchieved()?this.doWait():this.isWaiting()===!0&&(this.goal=this.ai.setGoal(),this.anim=this.anim.replace("-wait","-walk"),this.check_animation())},b.exports=Pedestrian},{"./Brain":6}]},{},[5]);
//# sourceMappingURL=bundle.min.js.map